import React, { useState } from 'react';
import { SecurityScanResults, VulnerabilityList, ScanHistoryModal } from '../../../components/security/SecurityScanResults';
import { History } from 'lucide-react';

export const VulnerabilityReport = ({ artifact }) => {
  const [showHistory, setShowHistory] = useState(false);

  if (!artifact) return null;

  const handleScanStart = (scanData) => {
  };

  return (
    <div className="space-y-6">
      {/* Security Scan Results */}
      <SecurityScanResults 
        artifactId={artifact.id} 
        onScanStart={handleScanStart}
      />

      {/* Additional Actions */}
      <div className="flex items-center space-x-4">
        <button
          onClick={() => setShowHistory(true)}
          className="px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition flex items-center space-x-2"
        >
          <History className="w-4 h-4" />
          <span>View Scan History</span>
        </button>
      </div>

      {/* Detailed Vulnerability List */}
      <VulnerabilityList artifactId={artifact.id} />

      {/* Scan History Modal */}
      <ScanHistoryModal
        isOpen={showHistory}
        onClose={() => setShowHistory(false)}
        artifactId={artifact.id}
      />
    </div>
  );
};